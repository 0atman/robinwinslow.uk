<!doctype html>

<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

     	<title>Converting projects between Git and Bazaar | by Robin</title>

    	<meta name="description" content="In my team, we often work in both git and bzr version control systems. This is a little guide about managing both together.">
        <meta name="viewport" content="width=device-width">

        <link rel="canonical" href="https://robinwinslow.uk/2015/01/10/converting-between-git-and-bzr/" />

        <link type="text/css" rel="stylesheet" href="/assets/global-cde306f7329733dd6abd0056b28c2061da3b79079c896e4286449114bfff9d39.css">

        <script>
            if (location.hostname=="robinwinslow.uk") {
                var _gaq=[
                    ['_require', 'inpage_linkid', '//www.google-analytics.com/plugins/ga/inpage_linkid.js'],
                    ['_setAccount','UA-2993676-8'],
                    ['_trackPageview']
                ];
                (function() {
                    var ga = document.createElement('script');
                    ga.type = 'text/javascript';
                    ga.async = true;
                    ga.src = '//www.google-analytics.com/ga.js';
                    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                })();
            }
        </script>

        <link type="application/atom+xml" rel="alternative" href="/rss.xml" />
    </head>

    <body class="">
        <!--[if lt IE 9]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/?locale=en">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

        <header class="site-header">
            <h1>The blog of <a href="/">Robin</a></h1>

            <nav class="inline-navigation site-navigation">
                <ul>
                    <li class=""><a href="/dev/">Web dev</a></li>
                    <li class=""><a href="/politics/">Politics</a></li>
                    <li class=""><a href="/musings/">Musings</a></li>
                    <li class=""><a href="/">All articles</a></li>
                </ul>
            </nav>
        </header>

        <article>
    <header class="page-header">
        <date>10 Jan 2015</date>

        <h1>Converting projects between Git and Bazaar</h1>
    </header>

    <p>Here in the <a href="http://design.canonical.com/team/">design team</a> we use both <a href="http://en.wikipedia.org/wiki/GNU_Bazaar">Bazaar</a> and <a href="http://git-scm.com/">Git</a> to keep track our projects&#39; hostory.</p>

<p>We quite often end up coverting our projects from Bazaar to Git or vice-versa. Here are some tips on how to do that.</p>

<h1 id="converting-between-git-and-bazaar">Converting between Git and Bazaar</h1>

<p>To convert revision history between Git and Bazaar, we will use their respective <a href="http://wiki.bazaar.canonical.com/BzrFastImport">fast</a>-<a href="https://www.kernel.org/pub/software/scm/git/docs/git-fast-import.html">import</a> features.</p>

<h2 id="install-bzr-fastimport">Install <code>bzr-fastimport</code></h2>

<p>In either case, you need the <code>fastimport</code> plugin for Bazaar, which installs both <code>bzr fast-import</code> and <code>bzr fast-export</code>:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">cd</span> ~/.bazaar/plugins
bzr branch lp:bzr-fastimport fastimport
</code></pre></div>
<h2 id="git-to-bazaar">Git to Bazaar</h2>

<p>To convert a Bazaar branch to Git, open a Bazaar branch of your project and do the following:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">git init                                        <span class="c"># Initialise a new git repo</span>
bzr fast-export --plain . | git fast-import     <span class="c"># Import Bazaar history into Git</span>
</code></pre></div>
<p>Now you should have all the revision history for that Bazaar branch in Git:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">git log  <span class="c"># Check your revision history is in Git</span>
</code></pre></div>
<p><small>(From <a href="http://astrofloyd.wordpress.com/2012/09/06/convert-bzr-to-git/">Astrofloyd&#39;s blog</a>)</small></p>

<h2 id="bazaar-to-git">Bazaar to Git</h2>

<p>Converting from Bazaar to Git is slightly different. Because Bazaar stores branches in sub-folders, while Git stores branches all in the same directory, when you convert a Git repository to Bazaar, it will create a directory tree for the branches:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">bzr init-repo bzr-repo                                       <span class="c"># Create a new Bazaar repository tree</span>
git fast-export -M --all | <span class="o">(</span><span class="nb">cd </span>bzr-repo; bzr fast-import -<span class="o">)</span>  <span class="c"># Export Git history into Bazaar</span>
</code></pre></div>
<p><code>bzr-repo</code> will now contain a folder for each branch that was in your Git repository. You&#39;re probably most interested in <code>trunk</code>, which will be at <code>bzr-repo/trunk</code>, or perhaps <code>bzr-repo/trunk.remote</code>:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">cd </span>bzr-repo/trunk  <span class="c"># Open the "trunk" branch (equivalent of "master")</span>
bzr log | less     <span class="c"># Check your revision history is in Bazaar</span>
</code></pre></div>
<p><small>(From <a href="http://wiki.bazaar.canonical.com/Scenarios/ConvertFromGit">the Bazaar wiki</a>)</small></p>

<h1 id="keeping-a-project-in-both-git-and-bazaar">Keeping a project in both Git and Bazaar</h1>

<p>You may wish to keep a project in both Git and Bazaar.</p>

<h2 id="create-ignore-files-for-both-systems">Create ignore files for both systems</h2>

<p>As your project may be used in either Git or Bazaar, you should create practically duplicate <a href="https://help.github.com/articles/ignoring-files"><code>.gitignore</code></a> and <code>.bzrignore</code> files, the only difference being that the <code>.bzrignore</code> should ignore the <code>.git</code> directory, and the <code>.gitignore</code> should ignore the <code>.bzr</code> directory. You should also make sure you ignore the <code>bzr-repo</code> directory - e.g.:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>cat .gitignore
.bzr/
.sass-cache/
bzr-repo/
<span class="k">*</span>.pyc
<span class="gp">$ </span>cat .bzrignore
.git/
.sass-cache/
bzr-repo/
<span class="k">*</span>.pyc
</code></pre></div>
<p>And keep both ignore files in all versions of the project.</p>

<h2 id="only-work-in-one-repository">Only work in one repository</h2>

<p>It is not practical to be doing your actual work in both systems, because converting from one to the other will overwrite any history in the destination repository. For this reason you need to choose to do all your work in either Git or Bazaar, and then regularly convert it to the other using the above conversion instructions.</p>

<p>(Originally published <a href="http://design.canonical.com/2015/01/converting-projects-between-git-and-bazaar/" title="ubuntu design: Converting projects between Git and Bazaar">on design.canonical.com</a>)</p>


<!-- Generate subnav for article -->
<script type="text/javascript" src="/assets/subnav-020636817964deb048fb98c55583f2981ff145d2db5e13d5c3b624c4ef8613f4.js"></script>


    <hr>

    <nav class="tags-list muted">
        <label>Tags</label>

        <ul>

            <li><a href="/postsbytag/#front-end">front-end</a></li>

            <li><a href="/postsbytag/#back-end">back-end</a></li>

            <li><a href="/postsbytag/#dev">dev</a></li>

            <li><a href="/postsbytag/#canonical">canonical</a></li>

        </ul>
    </nav>


<hr/>

<div id="disqus_thread" class="comments"></div>

</article>


<nav class="related-nav article-index">
    <h1>Similar articles</h1>

    <ul>
    
        
            
                <li>
    <article>
        <a href="/2015/03/05/a-seachange-in-front-end-best-practice/">
            <date>05 Mar 2015</date>
            <h1>A seachange in front-end best practice - but not for a while</h1>
            <p>With the advent of HTTP/2, many front-end performance best practices will change. But we should only switch over when the browser support is there.</p>
        </a>


        <nav class="tags-list muted">
            <label>Tags</label>

            <ul>

                <li><a href="/postsbytag/#dev">dev</a></li>

                <li><a href="/postsbytag/#front-end">front-end</a></li>

                <li><a href="/postsbytag/#back-end">back-end</a></li>

            </ul>
        </nav>

    </article>
</li>

            
        
            
        
            
                <li>
    <article>
        <a href="/2014/09/18/markup-on-the-information-superhighway/">
            <date>18 Sep 2014</date>
            <h1>The importance of markup on the information superhighway</h1>
            <p>A fairly informal piece about the importance of understanding markup and the internet.</p>
        </a>


        <nav class="tags-list muted">
            <label>Tags</label>

            <ul>

                <li><a href="/postsbytag/#front-end">front-end</a></li>

                <li><a href="/postsbytag/#dev">dev</a></li>

                <li><a href="/postsbytag/#blogging">blogging</a></li>

                <li><a href="/postsbytag/#politics">politics</a></li>

                <li><a href="/postsbytag/#canonical">canonical</a></li>

            </ul>
        </nav>

    </article>
</li>

            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
    </ul>
</nav>


<script>
    if (location.hostname=="robinwinslow.uk") {
        var disqus_shortname = 'robin-blog'; // required: replace example with your forum shortname

        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    }
</script>

<noscript>Please enable JavaScript to view the comments (powered by <a href="http://disqus.com/?ref_noscript">Disqus</a>)</noscript>


        <footer class="site-footer">
            <nav class="vcard" id="contact-information">
                <h1>Contact information</h1>

                <ul>
                    <li><a href="mailto:robin+blog@robinwinslow.uk" class="email">robin@robinwinslow.uk</a></li>
                    <li><a href="tel:07795070704" class="tel">07795070704</a></li>
                    <li><a href="https://www.google.co.uk/maps?q=ng7">NG7, Nottingham, UK</a></li>
                </ul>
            </nav>

            <nav>
                <h1>Further writing</h1>

                <ul>
                    <li><a href="http://cv.robinwinslow.uk">cv.robinwinslow.uk</a></li>
                    <li><a href="http://design.canonical.com/author/nottrobin/">design.canonical.com</a></li>
                    </li>
                </ul>
            </nav>

            <nav>
                <h1>Profiles</h1>

                <ul>
                    <li><a href="https://twitter.com/nottrobin">twitter.com (@nottrobin)</a></li>
                    <li><a href="https://facebook.com/robinwinslowmorris">facebook.com (robinwinslowmorris)</a></li>
                    <li><a href="https://github.com/nottrobin/">github.com (nottrobin)</a>
                </ul>
            </nav>

            <p>
                All articles are written by me, <a href="https://plus.google.com/104026832761488144614" rel="author">Robin Winslow</a>, unless otherwise stated. Feel free to use any of my writing, but please <a href="http://creativecommons.org/licenses/by/4.0/">give me attribution</a>.
            </p>

            <p>You're free to download this entire site <a href="https://github.com/nottrobin/robinwinslow.uk/">from github</a>, and <a href="http://creativecommons.org/publicdomain/zero/1.0/">do whatever you like</a> with the code.</p>

            <p><a href="https://github.com/nottrobin/robinwinslow.uk/" class="github-fork">Fork me on github.</a></p>
        </footer>
		<!--[if !(lt IE 8)]><!-->
		<script type="text/javascript">
		  (function(){
			var e = document.createElement('script'); e.type='text/javascript'; e.async = true;
			e.src = 'https://www.eff.org/ngw/widget.min.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(e, s);
		  })();
		</script>
		<!--<![endif]-->
    </body>
</html>
